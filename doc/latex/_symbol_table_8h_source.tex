\hypertarget{_symbol_table_8h_source}{}\doxysection{Symbol\+Table.\+h}
\label{_symbol_table_8h_source}\index{compiler/SymbolTable.h@{compiler/SymbolTable.h}}
\mbox{\hyperlink{_symbol_table_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{}
\DoxyCodeLine{9 }
\DoxyCodeLine{10   \mbox{\hyperlink{_symbol_table_8h_a1d1cfd8ffb84e947f82999c682b666a7afd5a5f51ce25953f3db2c7e93eb7864a}{INT}},}
\DoxyCodeLine{11   \mbox{\hyperlink{_symbol_table_8h_a1d1cfd8ffb84e947f82999c682b666a7a9cf4a0866224b0bb4a7a895da27c9c4c}{FLOAT}},}
\DoxyCodeLine{12   \mbox{\hyperlink{_symbol_table_8h_a1d1cfd8ffb84e947f82999c682b666a7adb31f5ef7acca5e1131fcc0fbfa6911d}{VOID}}}
\DoxyCodeLine{13 \} \mbox{\hyperlink{_symbol_table_8h_a1d1cfd8ffb84e947f82999c682b666a7}{Type}}; }
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{class_symbol_table}{SymbolTable}} \{}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{keyword}{public}:}
\DoxyCodeLine{27 }
\DoxyCodeLine{28   \mbox{\hyperlink{class_symbol_table_a1fbe6cec5594463b766db0ac58c9aa1d}{SymbolTable}}() : currentIndex(-\/4), numTemp(0) \{\} }
\DoxyCodeLine{29   \mbox{\hyperlink{class_symbol_table_a5d5ae9b5b22d87691cec9ec17cfff650}{\string~SymbolTable}}() \{\} }
\DoxyCodeLine{36   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_symbol_table_a8f448e775aac0106fb3180eb3e616ed5}{add}} (\textcolor{keyword}{const} std::string \&symbol);}
\DoxyCodeLine{37 }
\DoxyCodeLine{42   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_symbol_table_a13c78cbe6fabe14903a4d79f5d890186}{giveIndex}} (\textcolor{keyword}{const} std::string \&symbol);}
\DoxyCodeLine{43   }
\DoxyCodeLine{44   \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_symbol_table_a297d7b56c55fd3e75fcba27ee6b393e8}{contains}} (\textcolor{keyword}{const} std::string \&symbol) \textcolor{keyword}{const}; }
\DoxyCodeLine{57   \textcolor{keywordtype}{int} \mbox{\hyperlink{class_symbol_table_acefbcf8619b6c3ace300f89a62f0fa12}{getValue}} (\textcolor{keyword}{const} std::string \&symbol) \textcolor{keyword}{const};}
\DoxyCodeLine{58 }
\DoxyCodeLine{59   }
\DoxyCodeLine{60   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_symbol_table_a0c1fd38438748bb47683673afdb329d5}{printTable}}() \textcolor{keyword}{const}; }
\DoxyCodeLine{66   std::string \mbox{\hyperlink{class_symbol_table_a9abc3312c8843f46926b8e0d5b980714}{createTemp}}();}
\DoxyCodeLine{67 }
\DoxyCodeLine{73   std::string \mbox{\hyperlink{class_symbol_table_a6a59232b47fe03d3f1f17bbcc26cc93d}{createConst}}(\textcolor{keywordtype}{int} value);}
\DoxyCodeLine{74 }
\DoxyCodeLine{75   \textcolor{keywordtype}{int} \mbox{\hyperlink{class_symbol_table_a16ae3c294ef63773c91c0144c4c53db0}{getSizeMemory}}() \textcolor{keyword}{const}; }
\DoxyCodeLine{77 \textcolor{keyword}{private}:}
\DoxyCodeLine{78 }
\DoxyCodeLine{79   std::unordered\_map<std::string, int> table; }
\DoxyCodeLine{80   \textcolor{comment}{//std::unordered\_map<std::string, Type> type; //a implÃ©menter}}
\DoxyCodeLine{81   \textcolor{keywordtype}{int} currentIndex; }
\DoxyCodeLine{83   \textcolor{keywordtype}{int} numTemp; }
\DoxyCodeLine{85 \};}
\DoxyCodeLine{86 }
\DoxyCodeLine{87 }
\DoxyCodeLine{88 \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_symbol_table_acefbcf8619b6c3ace300f89a62f0fa12}{SymbolTable::getValue}}(\textcolor{keyword}{const} std::string \&symbol)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{89 }
\DoxyCodeLine{90   \textcolor{keywordflow}{return} table.at(symbol);}
\DoxyCodeLine{91 }
\DoxyCodeLine{92 \}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_symbol_table_a297d7b56c55fd3e75fcba27ee6b393e8}{SymbolTable::contains}}(\textcolor{keyword}{const} std::string \&symbol)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{95 }
\DoxyCodeLine{96   \textcolor{keywordflow}{return} table.count(symbol) > 0;}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_symbol_table_a8f448e775aac0106fb3180eb3e616ed5}{SymbolTable::add}} (\textcolor{keyword}{const} std::string \&symbol) \{}
\DoxyCodeLine{102   }
\DoxyCodeLine{103   table[symbol] = 0;}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_symbol_table_a13c78cbe6fabe14903a4d79f5d890186}{SymbolTable::giveIndex}}(\textcolor{keyword}{const} std::string \&symbol) \{}
\DoxyCodeLine{108 }
\DoxyCodeLine{109   \textcolor{keywordflow}{if} (table.count(symbol) > 0 \&\& table[symbol] != 0) \{}
\DoxyCodeLine{110     \textcolor{keywordflow}{return};}
\DoxyCodeLine{111   \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113   table[symbol] = currentIndex;}
\DoxyCodeLine{114   currentIndex -\/= 4;}
\DoxyCodeLine{115 \}}
\DoxyCodeLine{116   }
\DoxyCodeLine{117 }
\DoxyCodeLine{118 \textcolor{keyword}{inline} std::string \mbox{\hyperlink{class_symbol_table_a9abc3312c8843f46926b8e0d5b980714}{SymbolTable::createTemp}}() \{}
\DoxyCodeLine{119 }
\DoxyCodeLine{120   std::string name = \textcolor{stringliteral}{"{}\#tmp"{}} + std::to\_string(numTemp);}
\DoxyCodeLine{121   numTemp++;}
\DoxyCodeLine{122 }
\DoxyCodeLine{123   \mbox{\hyperlink{class_symbol_table_a13c78cbe6fabe14903a4d79f5d890186}{giveIndex}}(name);}
\DoxyCodeLine{124 }
\DoxyCodeLine{125   \textcolor{keywordflow}{return} name;}
\DoxyCodeLine{126   }
\DoxyCodeLine{127 \}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129 }
\DoxyCodeLine{130 \textcolor{keyword}{inline} std::string \mbox{\hyperlink{class_symbol_table_a6a59232b47fe03d3f1f17bbcc26cc93d}{SymbolTable::createConst}}(\textcolor{keywordtype}{int} value) \{}
\DoxyCodeLine{131 }
\DoxyCodeLine{132   std::string name = \textcolor{stringliteral}{"{}\#const"{}} + std::to\_string(numTemp);}
\DoxyCodeLine{133   numTemp++;}
\DoxyCodeLine{134 }
\DoxyCodeLine{135   table[name] = value;}
\DoxyCodeLine{136 }
\DoxyCodeLine{137   \textcolor{keywordflow}{return} name;}
\DoxyCodeLine{138 }
\DoxyCodeLine{139 \}}
\DoxyCodeLine{140 }
\DoxyCodeLine{141 \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_symbol_table_a16ae3c294ef63773c91c0144c4c53db0}{SymbolTable::getSizeMemory}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{142 }
\DoxyCodeLine{143   \textcolor{keywordtype}{int} size = -\/currentIndex;}
\DoxyCodeLine{144   \textcolor{keywordflow}{if} (size \% 16 == 0) \{}
\DoxyCodeLine{145     \textcolor{keywordflow}{return} size;}
\DoxyCodeLine{146   \}}
\DoxyCodeLine{147 }
\DoxyCodeLine{148   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{149     size = size/16;}
\DoxyCodeLine{150     size = 16*(size+1);}
\DoxyCodeLine{151     \textcolor{keywordflow}{return} size;}
\DoxyCodeLine{152   \}}
\DoxyCodeLine{153     }
\DoxyCodeLine{154   }
\DoxyCodeLine{155 \}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_symbol_table_a0c1fd38438748bb47683673afdb329d5}{SymbolTable::printTable}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{158 }
\DoxyCodeLine{159   std::cout << \textcolor{stringliteral}{"{}Symbol table:"{}} << table.size() << std::endl;}
\DoxyCodeLine{160   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const}\& x : table) \{}
\DoxyCodeLine{161     std::cout << x.first << \textcolor{stringliteral}{"{} : "{}} << x.second << std::endl;}
\DoxyCodeLine{162   \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \}}
\DoxyCodeLine{165 }
\DoxyCodeLine{166   }

\end{DoxyCode}
